<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Coughcounter</title>
  <meta name="author" content="Ives">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  <h1>Coughcounter!</h1>
  <p><span id="count">0</span> coughs since you entered</p>
  <button onclick="cough()"/>Cough</button>

  <script src="https://cdn.pubnub.com/pubnub-dev.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<!-- Instantiate PubNub -->
<script type="text/javascript">

    var listener = PUBNUB.init({
        publish_key: 'pub-c-5fb03a3c-88c5-46b0-80bd-1574290efe01',
        subscribe_key: 'sub-c-44c87c06-78e7-11e6-b27b-02ee2ddab7fe',
        ssl: true,
    });

    function increaseCough() {
      const currentCough = +$('#count')[0].innerHTML;
      $('#count').text(currentCough + 1);
    }

    listener.subscribe({
      channel: 'cough',
      message: increaseCough,
    });

    window.cough = () => {
      listener.publish({
        channel: 'cough',
        message: 'COUGH!!'
      });
    }
</script>

</body>
</html>
